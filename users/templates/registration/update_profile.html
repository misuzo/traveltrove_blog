{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">Update Profile</h2>

    <!-- Profile Update Form -->
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Display Avatar -->
        <div class="form-group">
            <p>Current Avatar:</p>
            <img src="{{ request.user.profile.avatar.url }}"
                 class="img-thumbnail rounded-circle"
                 style="width: 150px; height: 150px; object-fit: cover;"
                 onerror="this.onerror=null; this.src='{% static 'images/default.jpg' %}'"/>
        </div>

        <!-- User Form -->
        <div class="form-group">
            {{ user_form.as_p }}
        </div>

        <!-- Profile Form -->
        <div class="form-group">
            {{ profile_form.as_p }}
        </div>

        <!-- Buttons -->
        <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-primary">Update</button>
            <a href="javascript:history.back()" class="btn btn-secondary">Back</a>
        </div>
    </form>
</div>
{% endblock %}
